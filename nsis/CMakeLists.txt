find_file(NSIS_PROGRAM
	NAMES
		makensis.exe
	PATHS
		"C:/Program Files/NSIS/"
)

if (NSIS_PROGRAM)
	message(STATUS "Found NSIS: ${NSIS_PROGRAM}")
else (NSIS_PROGRAM)
	message(FATAL_ERROR "Could not find NSIS")
endif (NSIS_PROGRAM)

set(INSTALLER_DIR
	${CMAKE_SOURCE_DIR}/nsis
)

add_custom_target(nsis
	${NSIS_PROGRAM}
	/DBUILD_DIR="${BUILD_DIR}"
	/DPRODUCT_NAME="${QUARKPLAYER_NAME}"
	/DPRODUCT_VERSION="${QUARKPLAYER_VERSION}"
	/DBINARY_NAME="${QUARKPLAYER_BINARY_NAME}"
	/DPRODUCT_DESCRIPTION="${QUARKPLAYER_DESCRIPTION_SUMMARY}"
	/DPRODUCT_PUBLISHER="${QUARKPLAYER_AUTHORS}"
	/DPRODUCT_URL="${QUARKPLAYER_URL}"
	/DPRODUCT_COPYRIGHT="${QUARKPLAYER_COPYRIGHT}"
	/DPRODUCT_LICENSE_FILE="${QUARKPLAYER_LICENSE_FILE}"
	/DINSTALLER_NAME="${CMAKE_SOURCE_DIR}/${QUARKPLAYER_PACKAGE_FILE}.exe"
	${CMAKE_SOURCE_DIR}/nsis/installer.nsi
)
